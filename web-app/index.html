<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title> Auditing tool web app</title>
    <style>
    body {
        background-color: #d3c8d5;
        }
    button {
        color: #ff00fb;
        font-family: Arial, Helvetica, sans-serif;
        font-size: 20px;
        margin-left: 40px;
        }
    </style>
    <script>
        function response_handler(response) {
            var instancesDict = JSON.parse(response).instances;
            var AMIsDict = JSON.parse(response).amis;
            let element = document.getElementById("data");
            element.innerHTML = instancesDict;

        }

        var callAPI = ()=>{
            var myHeaders = new Headers();
            var rawResponse = "";
            // add content type header to object
            myHeaders.append("Content-Type", "application/json");

            // using built in JSON utility package turn object to string and store in a variable
            var raw = JSON.stringify({
                "data-type": "instances"
            });
            // create a JSON object with parameters for API call and store in a variable
            var GETRequest = {
                method : 'GET',
                headers : myHeaders,
                redirect: 'follow'
            }

            fetch("https://09zvg0tsra.execute-api.us-east-1.amazonaws.com/dev", GETRequest)
            .then(response => response.text())
            .then(result => response_handler(JSON.parse(result).body))
            .catch(error => console.log('error', error));
        }
    </script>
</head>
<body>
<button type="button" onclick="callAPI()"> Make call to API Lambda function</button>
<div id="data">
    Hello, welcome
</div>

</body>
</html>